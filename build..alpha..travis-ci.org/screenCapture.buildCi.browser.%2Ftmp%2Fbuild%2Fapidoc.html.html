<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/jintoppy/protractor-html-screenshot-reporter">protractor-html-screenshot-reporter (v0.0.21)</a>
</h1>
<h4>An npm module and grunt plugin which generates your Protractor test reports in HTML with screenshots</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.protractor-html-screenshot-reporter">module protractor-html-screenshot-reporter</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.protractor-html-screenshot-reporter.protractor-html-screenshot-reporter">
            function <span class="apidocSignatureSpan"></span>protractor-html-screenshot-reporter
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">protractor-html-screenshot-reporter.</span>jsonparser</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">protractor-html-screenshot-reporter.</span>util</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.protractor-html-screenshot-reporter.jsonparser">module protractor-html-screenshot-reporter.jsonparser</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.protractor-html-screenshot-reporter.jsonparser.processJson">
            function <span class="apidocSignatureSpan">protractor-html-screenshot-reporter.jsonparser.</span>processJson
            <span class="apidocSignatureSpan">(jsonData, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.protractor-html-screenshot-reporter.util">module protractor-html-screenshot-reporter.util</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.protractor-html-screenshot-reporter.util.addMetaData">
            function <span class="apidocSignatureSpan">protractor-html-screenshot-reporter.util.</span>addMetaData
            <span class="apidocSignatureSpan">(metaData, baseName, descriptions, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.protractor-html-screenshot-reporter.util.gatherDescriptions">
            function <span class="apidocSignatureSpan">protractor-html-screenshot-reporter.util.</span>gatherDescriptions
            <span class="apidocSignatureSpan">(suite, soFar)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.protractor-html-screenshot-reporter.util.generateGuid">
            function <span class="apidocSignatureSpan">protractor-html-screenshot-reporter.util.</span>generateGuid
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.protractor-html-screenshot-reporter.util.removeDirectory">
            function <span class="apidocSignatureSpan">protractor-html-screenshot-reporter.util.</span>removeDirectory
            <span class="apidocSignatureSpan">(dirPath)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.protractor-html-screenshot-reporter.util.storeMetaData">
            function <span class="apidocSignatureSpan">protractor-html-screenshot-reporter.util.</span>storeMetaData
            <span class="apidocSignatureSpan">(metaData, file)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.protractor-html-screenshot-reporter.util.storeScreenShot">
            function <span class="apidocSignatureSpan">protractor-html-screenshot-reporter.util.</span>storeScreenShot
            <span class="apidocSignatureSpan">(data, file)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.protractor-html-screenshot-reporter" id="apidoc.module.protractor-html-screenshot-reporter">module protractor-html-screenshot-reporter</a></h1>


    <h2>
        <a href="#apidoc.element.protractor-html-screenshot-reporter.protractor-html-screenshot-reporter" id="apidoc.element.protractor-html-screenshot-reporter.protractor-html-screenshot-reporter">
        function <span class="apidocSignatureSpan"></span>protractor-html-screenshot-reporter
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ScreenshotReporter(options) {
	options = options || {};
	if(!options.baseDirectory || options.baseDirectory.length === 0) {
		throw new Error('Please pass a valid base directory to store the ' +
			'screenshots into.');
	} else {
		this.baseDirectory = options.baseDirectory;
	}

	if(typeof (options.cssOverrideFile) !== 'undefined' &amp;&amp; _.isString(options.cssOverrideFile) ){
		this.cssOverrideFile = options.cssOverrideFile;
	} else {
		this.cssOverrideFile = null;
	}

	this.pathBuilder = options.pathBuilder || defaultPathBuilder;
	this.disableMetaData = options.disableMetaData || false;
	this.combinedJsonFileName = options.combinedJsonFileName || 'combined.json';
	this.docTitle = options.docTitle || 'Generated test report';
	this.docHeader = options.docHeader || 'Test Results';
	this.docName = options.docName || 'report.html';
	this.metaDataBuilder = options.metaDataBuilder || defaultMetaDataBuilder;
	this.preserveDirectory = options.preserveDirectory || false;
	this.takeScreenShotsForSkippedSpecs =
		options.takeScreenShotsForSkippedSpecs || false;
		this.takeScreenShotsOnlyForFailedSpecs =
 		options.takeScreenShotsOnlyForFailedSpecs || false;
 	this.finalOptions = {
 		takeScreenShotsOnlyForFailedSpecs: this.takeScreenShotsOnlyForFailedSpecs,
 		takeScreenShotsForSkippedSpecs: this.takeScreenShotsForSkippedSpecs,
 		metaDataBuilder: this.metaDataBuilder,
 		pathBuilder: this.pathBuilder,
 		disableMetaData: this.disableMetaData,
 		combinedJsonFileName: this.combinedJsonFileName,
 		baseDirectory: this.baseDirectory,
 		docTitle: this.docTitle,
 		docHeader: this.docHeader,
 		docName: this.docName,
 		cssOverrideFile: this.cssOverrideFile
 	};

 	if(!this.preserveDirectory){
 		util.removeDirectory(this.finalOptions.baseDirectory);
 	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.protractor-html-screenshot-reporter.jsonparser" id="apidoc.module.protractor-html-screenshot-reporter.jsonparser">module protractor-html-screenshot-reporter.jsonparser</a></h1>


    <h2>
        <a href="#apidoc.element.protractor-html-screenshot-reporter.jsonparser.processJson" id="apidoc.element.protractor-html-screenshot-reporter.jsonparser.processJson">
        function <span class="apidocSignatureSpan">protractor-html-screenshot-reporter.jsonparser.</span>processJson
        <span class="apidocSignatureSpan">(jsonData, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function processJson(jsonData, options){
    passCount=0;
    failCount = 0;
    reporterOptions = options;
    var jsonStr = "&lt;ul&gt;";
    formattedJson = [];
    currentFormattedDataIndex = 0;

    _.each(jsonData, function (value) {
        var descArr = value.description.split('|').reverse();
        if (descArr.length &gt; 0) {
            formatData(value, descArr);
        }
    });



    function parseJSON(element) {
        if(element.children){

            jsonStr += '&lt;li&gt;'+element.desc+ '&lt;ul&gt;';
            element.children.forEach(function (child, index, childArr) {
                if (child.children) {
                    parseJSON(child);
                }else{
                    var ss = generateHTML(child);
                    jsonStr += '&lt;li&gt;' + ss +'&lt;/li&gt;';
                    if(index === childArr.length-1){
                        jsonStr += '&lt;/ul&gt;&lt;/li&gt;';
                    }
                }
            });
            return jsonStr;
        }

    }

    var tableHtml = "";
    formattedJson.forEach(function (element) {
        jsonStr = "";
        tableHtml += parseJSON(element);
        tableHtml += new Array(element.depth-1).join('&lt;/ul&gt;&lt;/li&gt;');

    });
    tableHtml = '&lt;ul&gt;' + tableHtml + '&lt;/ul&gt;';
    tableHtml += "&lt;div&gt;&lt;h2&gt;&lt;u&gt;Results summary&lt;/u&gt;&lt;/h2&gt;";
    tableHtml += "&lt;b&gt;Total tests passed&lt;/b&gt;: "+ passCount +" &lt;br/&gt; &lt;b&gt;Total tests failed&lt;/b&gt;: "+ failCount +" &lt;br/&gt; This report
generated on "+new Date()+" &lt;/div&gt;";

    // //updating the document title
    // var docTitleRegex = new RegExp('{{reportTitle}}');
    // staticHTMLContentprefix =  staticHTMLContentprefix.replace(docTitleRegex, reporterOptions.docTitle);
    // return staticHTMLContentprefix + tableHtml + staticHTMLContentpostfix;
    var finalHtml = phssr.makeHTMLPage(tableHtml, reporterOptions);
    return finalHtml;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

function addHTMLReport(jsonData, baseName, options){
	var basePath = path.dirname(baseName),
		htmlFile = path.join(basePath, options.docName),
		stream;

	stream = fs.createWriteStream(htmlFile);
	stream.write(jsonParser.<span class="apidocCodeKeywordSpan">processJson</span>(jsonData, options));
	stream.end();

}

function addMetaData(metaData, baseName, descriptions, options){
	var json,
		stream,
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.protractor-html-screenshot-reporter.util" id="apidoc.module.protractor-html-screenshot-reporter.util">module protractor-html-screenshot-reporter.util</a></h1>


    <h2>
        <a href="#apidoc.element.protractor-html-screenshot-reporter.util.addMetaData" id="apidoc.element.protractor-html-screenshot-reporter.util.addMetaData">
        function <span class="apidocSignatureSpan">protractor-html-screenshot-reporter.util.</span>addMetaData
        <span class="apidocSignatureSpan">(metaData, baseName, descriptions, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function addMetaData(metaData, baseName, descriptions, options){
	var json,
		stream,
		basePath = path.dirname(baseName),
		file = path.join(basePath, options.combinedJsonFileName);
	try {
		metaData.description = descriptions.join('|');
		json = metaData;
		var currentData;
		try{
			currentData = JSON.parse(fs.readFileSync(file, {
				encoding: 'utf8'
			}));
			if(currentData.length &amp;&amp; currentData.length&gt;0){
				currentData.push(json);
			}
			json = currentData;
		}catch(e){
			json = [json];
		}
		stream = fs.createWriteStream(file);
		stream.write(JSON.stringify(json));
		stream.end();

		addHTMLReport(json, baseName, options);
	} catch(e) {
		console.error('Could not save meta data');
	}

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				, directory = path.dirname(screenShotPath);

			metaData.screenShotFile = screenShotFile;
			mkdirp(directory, function(err) {
				if(err) {
					throw new Error('Could not create directory ' + directory);
				} else {
					util.<span class="apidocCodeKeywordSpan">addMetaData</span>(metaData, metaDataPath, descriptions, self.finalOptions);
					if(takeScreenshot) {
						util.storeScreenShot(png, screenShotPath);
					}
					if (!self.finalOptions.disableMetaData) {
						util.storeMetaData(metaData, metaDataPath);
					}
				}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.protractor-html-screenshot-reporter.util.gatherDescriptions" id="apidoc.element.protractor-html-screenshot-reporter.util.gatherDescriptions">
        function <span class="apidocSignatureSpan">protractor-html-screenshot-reporter.util.</span>gatherDescriptions
        <span class="apidocSignatureSpan">(suite, soFar)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function gatherDescriptions(suite, soFar) {
	soFar.push(suite.description);

	if(suite.parentSuite) {
		return gatherDescriptions(suite.parentSuite, soFar);
	} else {
		return soFar;
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	}

	takeScreenshot = !(self.takeScreenShotsOnlyForFailedSpecs &amp;&amp; results.passed());

	finishReport = function(png) {

		browser.getCapabilities().then(function (capabilities) {
			var descriptions = util.<span class="apidocCodeKeywordSpan">gatherDescriptions</span>(
					spec.suite
					, [spec.description]
				)


				, baseName = self.pathBuilder(
					spec
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.protractor-html-screenshot-reporter.util.generateGuid" id="apidoc.element.protractor-html-screenshot-reporter.util.generateGuid">
        function <span class="apidocSignatureSpan">protractor-html-screenshot-reporter.util.</span>generateGuid
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function generateGuid() {
    var buf = new Uint16Array(8);
    buf = crypto.randomBytes(8);
    var S4 = function(num) {
            var ret = num.toString(16);
            while(ret.length &lt; 4){
                    ret = "0"+ret;
            }
            return ret;
    };

    return (
            S4(buf[0])+S4(buf[1])+"-"+S4(buf[2])+"-"+S4(buf[3])+"-"+
            S4(buf[4])+"-"+S4(buf[5])+S4(buf[6])+S4(buf[7])
    );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*                             in-depth information about the Selenium node
*                             which executed the test case.
*
* Returns:
*     (String) containing the built path
*/
function defaultPathBuilder(spec, descriptions, results, capabilities) {
	return util.<span class="apidocCodeKeywordSpan">generateGuid</span>();
}

/** Function: defaultMetaDataBuilder
* Uses passed information to generate a meta data object which can be saved
* along with a screenshot.
* You do not have to add the screenshots file path since this will be appended
* automatially.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.protractor-html-screenshot-reporter.util.removeDirectory" id="apidoc.element.protractor-html-screenshot-reporter.util.removeDirectory">
        function <span class="apidocSignatureSpan">protractor-html-screenshot-reporter.util.</span>removeDirectory
        <span class="apidocSignatureSpan">(dirPath)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function removeDirectory(dirPath){
	try { var files = fs.readdirSync(dirPath); }
      catch(e) { return; }
      if (files.length &gt; 0)
        for (var i = 0; i &lt; files.length; i++) {
          var filePath = dirPath + '/' + files[i];
          if (fs.statSync(filePath).isFile())
            fs.unlinkSync(filePath);
          else
            removeDirectory(filePath);
        }
      fs.rmdirSync(dirPath);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		docTitle: this.docTitle,
		docHeader: this.docHeader,
		docName: this.docName,
		cssOverrideFile: this.cssOverrideFile
	};

	if(!this.preserveDirectory){
		util.<span class="apidocCodeKeywordSpan">removeDirectory</span>(this.finalOptions.baseDirectory);
	}
}

/** Function: reportSpecResults
* Called by Jasmine when reporting results for a test spec. It triggers the
* whole screenshot capture process and stores any relevant information.
*
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.protractor-html-screenshot-reporter.util.storeMetaData" id="apidoc.element.protractor-html-screenshot-reporter.util.storeMetaData">
        function <span class="apidocSignatureSpan">protractor-html-screenshot-reporter.util.</span>storeMetaData
        <span class="apidocSignatureSpan">(metaData, file)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function storeMetaData(metaData, file) {
	var json
		, stream;

	try {
		json = JSON.stringify(metaData);
		stream = fs.createWriteStream(file);

		stream.write(json);
		stream.end();
	} catch(e) {
		console.error('Could not save meta data for ' + file);
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
					throw new Error('Could not create directory ' + directory);
				} else {
					util.addMetaData(metaData, metaDataPath, descriptions, self.finalOptions);
					if(takeScreenshot) {
						util.storeScreenShot(png, screenShotPath);
					}
					if (!self.finalOptions.disableMetaData) {
						util.<span class="apidocCodeKeywordSpan">storeMetaData</span>(metaData, metaDataPath);
					}
				}
			});
		});

	};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.protractor-html-screenshot-reporter.util.storeScreenShot" id="apidoc.element.protractor-html-screenshot-reporter.util.storeScreenShot">
        function <span class="apidocSignatureSpan">protractor-html-screenshot-reporter.util.</span>storeScreenShot
        <span class="apidocSignatureSpan">(data, file)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function storeScreenShot(data, file) {
	var stream = fs.createWriteStream(file);

	stream.write(new Buffer(data, 'base64'));
	stream.end();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			metaData.screenShotFile = screenShotFile;
			mkdirp(directory, function(err) {
				if(err) {
					throw new Error('Could not create directory ' + directory);
				} else {
					util.addMetaData(metaData, metaDataPath, descriptions, self.finalOptions);
					if(takeScreenshot) {
						util.<span class="apidocCodeKeywordSpan">storeScreenShot</span>(png, screenShotPath);
					}
					if (!self.finalOptions.disableMetaData) {
						util.storeMetaData(metaData, metaDataPath);
					}
				}
			});
		});
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>